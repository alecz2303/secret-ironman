Number.prototype.formatMoney=function(k,g,e){var h=this,k=isNaN(k=Math.abs(k))?2:k,g=g==undefined?".":g,e=e==undefined?",":e,f=h<0?"-":"",b=parseInt(h=Math.abs(+h||0).toFixed(k))+"",a=(a=b.length)>3?a%3:0;return f+(a?b.substr(0,a)+e:"")+b.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+e)+(k?g+Math.abs(h-b).toFixed(k).slice(2):"")};function calcula(e){var b=e.value;var a=e.name.substring(13);var c=a.match(/\[(\d+)/);var d=Number(c[1]);return $.ajax({url:"../invSalesItems/itemAll",data:{item_id:b},type:"POST",success:function(f){var g=JSON.parse(f);document.getElementById("InvSalesItems_"+d+"_description").value=g.description;document.getElementById("InvSalesItems_"+d+"_item_unit_price").value=g.unit_price;document.getElementById("InvSalesItems_"+d+"_item_cost_price").value=g.cost_price;document.getElementById("InvSalesItems_"+d+"_qty_exist").value=g.qty;document.getElementById("InvSalesItems_"+d+"_total").value=g.unit_price;total()}})}function suma(d){var a=d.name.substring(13);var b=a.match(/\[(\d+)/);var c=Number(b[1]);if(document.getElementById("InvSalesItems_"+c+"_discount_percent").value>0){document.getElementById("InvSalesItems_"+c+"_total").value=(document.getElementById("InvSalesItems_"+c+"_item_unit_price").value*document.getElementById("InvSalesItems_"+c+"_qty_purchased").value)-((document.getElementById("InvSalesItems_"+c+"_discount_percent").value*document.getElementById("InvSalesItems_"+c+"_total").value)/100)}else{document.getElementById("InvSalesItems_"+c+"_total").value=document.getElementById("InvSalesItems_"+c+"_item_unit_price").value*document.getElementById("InvSalesItems_"+c+"_qty_purchased").value}total()}function total(){var a=document.getElementsByClassName("inputTotal");var c=0;for(var b=0;b<a.length;b++){if(parseFloat(a[b].value)){c+=parseFloat(a[b].value)}}document.getElementById("InvFullNameCustomer_grand").value="$ "+c.formatMoney(2,".",",")}function validateForm(){var e=document.getElementsByClassName("inputItem");var f=document.getElementsByClassName("inputDescription");var a=document.getElementsByClassName("inputQty_purchased");var j=document.getElementsByClassName("inputItem_unit_prices");var l=document.getElementsByClassName("inputQty_exist");var g=0;var k=0;var h=0;var d=0;var b=0;for(var c=0;c<e.length;c++){if(e[c].value===null||e[c].value===""){g++;e[c].style.backgroundColor="rgba(153,51,51,0.5)";e[c].style.color="#FFFFFF";e[c].style.border="solid 1px #993333"}else{e[c].style.backgroundColor="rgba(111,174,127,0.5)";e[c].style.border="solid 1px #6fae7f";e[c].style.color="#000000"}if(f[c].value===null||f[c].value===""){k++;f[c].style.backgroundColor="rgba(153,51,51,0.5)";f[c].style.border="solid 1px #993333";f[c].style.color="#FFFFFF"}else{f[c].style.backgroundColor="rgba(111,174,127,0.5)";f[c].style.border="solid 1px #6fae7f";f[c].style.color="#000000"}if(parseInt(a[c].value)>parseInt(l[c].value)){d++;l[c].style.backgroundColor="rgba(153,51,51,0.5)";l[c].style.border="solid 1px #993333";l[c].style.color="#FFFFFF"}else{l[c].style.backgroundColor="rgba(111,174,127,0.5)";l[c].style.border="solid 1px #6fae7f";l[c].style.color="#000000"}if(a[c].value===null||a[c].value===""||a[c].value==="0"){h++;a[c].style.backgroundColor="rgba(153,51,51,0.5)";a[c].style.border="solid 1px #993333";a[c].style.color="#FFFFFF"}else{a[c].style.backgroundColor="rgba(111,174,127,0.5)";a[c].style.border="solid 1px #6fae7f";a[c].style.color="#000000"}if(j[c].value===null||j[c].value===""||j[c].value==="0"){b++;j[c].style.backgroundColor="rgba(153,51,51,0.5)";j[c].style.border="solid 1px #993333";j[c].style.color="#FFFFFF"}else{j[c].style.backgroundColor="rgba(111,174,127,0.5)";j[c].style.border="solid 1px #6fae7f";j[c].style.color="#000000"}}if(g>0){$(".id_item").val(null)}else{$(".id_item").val(1)}if(k>0){$(".description").val(null)}else{$(".description").val(2)}if(h>0){$(".qty_purchased").val(null)}else{$(".qty_purchased").val(3)}if(b>0){$(".item_unit_price").val(null)}else{$(".item_unit_price").val(4)}if(d>0){$(".item_qty_exist").val(-10000)}else{$(".item_qty_exist").val(1000000)}}function valida(e){var b=e.value;var a=e.name.substring(13);var c=a.match(/\[(\d+)/);var d=Number(c[1]);return $.ajax({url:"../invSalesItems/serialNumber",data:{serialnumber:b},type:"POST",success:function(f){var g=JSON.parse(f);if(g.serialnumber=="ACCEPTED"||g.serialnumber==""){e.style.backgroundColor="rgba(111,174,127,0.5)";e.style.border="solid 1px #6fae7f";e.style.color="#000000"}else{e.style.backgroundColor="rgba(153,51,51,0.5)";e.style.border="solid 1px #993333";e.style.color="#FFFFFF";alert("El numero de serie ya existe en la salida # "+g.salesid);e.focus()}total()}})};